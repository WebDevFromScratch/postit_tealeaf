<ul class="nav">
  <li>
    <%= link_to "Postit!", root_path, :class => 'brand' %>
  </li>
  <% if logged_in? %>
    <div class='nav_item'>
      <li>
        <%= link_to 'New Post', new_post_path, class: 'btn btn-success'%>
      </li>
    </div>
    <div class='nav_item'>
      <li>
        <%= link_to 'Edit Profile', edit_user_path(current_user), class: 'btn btn-success'%>
      </li>
    </div>
  <% end %>
  <div class='btn-group nav_item'>
    <%= link_to '#', class: 'btn dropdown-toggle', 'data-toggle' => 'dropdown' do %>
      Categories: <span class='caret'></span>
    <% end %>
    <!-- all this above (and below) has lots to do with Bootstrap conventions, not Rails -->
    <ul class='dropdown-menu'>
      <% Category.all.each do |category| %>
        <li>
          <%= link_to category.name, category_path(category) %>
        </li>
      <% end %>
      <% if logged_in? %>
        <li class='divider'></li>      
        <li>
          <%= link_to(new_category_path) do %> <!-- using link_to as block, a little bit of different approach -->
            <i class='icon-plus'></i>
            New Category
          <% end %>
        </li>
      <% end %>
    </ul>
  </div>
</ul>

<ul class="nav pull-right">
<% unless logged_in? %>
  <div class='nav_item'>
    <li>
      <%= link_to 'Register', register_path, class: 'btn btn-primary'%>
    </li>
  </div>
  <div class='nav_item'>
    <li>
      <%= link_to 'Login', login_path, class: 'btn btn-info'%>
    </li>
  </div>
<% else %>
  <li>
    <p class='navbar-text'>
      Logged in as: <%= current_user.username %>&nbsp;&nbsp;&nbsp;&nbsp;
    </p>
  </li>
  <li>
    <div class='nav-item'>
      <%= form_tag '/logout', method: 'delete' do %>
        <%= submit_tag 'Logout', class: 'btn btn-info' %>
      <% end %>        
    </div>
  </li>
<% end %>
</ul>